{
  "schema_version": "gatekeeper-artifact-v1.0",
  "timestamp": "2026-01-28T20:27:06.988832+00:00",
  "filepath": "/Users/frank/projects/claude-code-judge/.agent_backups/20260127_133401/verdict_cache.py",
  "mode": "repair-dry-run",
  "profile": "strict",
  "summary": {
    "initial_failure_count": 4,
    "final_failure_count": 0,
    "iterations_used": 1,
    "repair_confidence": 1.0,
    "improved": true,
    "fully_repaired": true
  },
  "failures": {
    "initial": [
      "Line 10: Function missing docstring",
      "Line 14: Function missing docstring",
      "Line 18: Function missing docstring",
      "Line 29: Function missing docstring"
    ],
    "final": []
  },
  "iterations": [
    {
      "iteration": 1,
      "failures_before": 4,
      "repairs_proposed": 4,
      "repairs": [
        {
          "line": 10,
          "old": "    def __init__(self, cache_dir: str = \".cache\"):",
          "new": "    def __init__(self, cache_dir: str = \".cache\"):\n        \"\"\"Initialize the verdict cache with a cache directory.\"\"\"",
          "reason": "Function missing docstring",
          "category": "docstring",
          "blocking": true
        },
        {
          "line": 14,
          "old": "    def _path(self, key: str) -> str:",
          "new": "    def _path(self, key: str) -> str:\n        \"\"\"Generate cache file path for a given key.\"\"\"",
          "reason": "Function missing docstring",
          "category": "docstring",
          "blocking": true
        },
        {
          "line": 18,
          "old": "    def get(self, key: str) -> Dict[str, Any] | None:",
          "new": "    def get(self, key: str) -> Dict[str, Any] | None:\n        \"\"\"Retrieve cached verdict for a given key.\"\"\"",
          "reason": "Function missing docstring",
          "category": "docstring",
          "blocking": true
        },
        {
          "line": 29,
          "old": "    def set(self, key: str, verdict: Dict[str, Any]) -> None:",
          "new": "    def set(self, key: str, verdict: Dict[str, Any]) -> None:\n        \"\"\"Store verdict in cache for a given key.\"\"\"",
          "reason": "Function missing docstring",
          "category": "docstring",
          "blocking": true
        }
      ]
    }
  ],
  "diff": {
    "before": "# verdict_cache.py\n\nimport os\nimport json\nimport hashlib\nfrom typing import Any, Dict\n\n\nclass VerdictCache:\n    def __init__(self, cache_dir: str = \".cache\"):\n        self.cache_dir = cache_dir\n        os.makedirs(cache_dir, exist_ok=True)\n\n    def _path(self, key: str) -> str:\n        h = hashlib.sha256(key.encode(\"utf-8\")).hexdigest()\n        return os.path.join(self.cache_dir, f\"{h}.json\")\n\n    def get(self, key: str) -> Dict[str, Any] | None:\n        path = self._path(key)\n        if not os.path.exists(path):\n            return None\n\n        try:\n            with open(path, \"r\") as f:\n                return json.load(f)\n        except Exception:\n            return None\n\n    def set(self, key: str, verdict: Dict[str, Any]) -> None:\n        path = self._path(key)\n        with open(path, \"w\") as f:\n            json.dump(verdict, f, indent=2)\n",
    "after": "# verdict_cache.py\n\nimport os\nimport json\nimport hashlib\nfrom typing import Any, Dict\n\n\nclass VerdictCache:\n    def __init__(self, cache_dir: str = \".cache\"):\n        \"\"\"Initialize the verdict cache with a cache directory.\"\"\"\n        self.cache_dir = cache_dir\n        os.makedirs(cache_dir, exist_ok=True)\n\n    def _path(self, key: str) -> str:\n        \"\"\"Generate cache file path for a given key.\"\"\"\n        h = hashlib.sha256(key.encode(\"utf-8\")).hexdigest()\n        return os.path.join(self.cache_dir, f\"{h}.json\")\n\n    def get(self, key: str) -> Dict[str, Any] | None:\n        \"\"\"Retrieve cached verdict for a given key.\"\"\"\n        path = self._path(key)\n        if not os.path.exists(path):\n            return None\n\n        try:\n            with open(path, \"r\") as f:\n                return json.load(f)\n        except Exception:\n            return None\n\n    def set(self, key: str, verdict: Dict[str, Any]) -> None:\n        \"\"\"Store verdict in cache for a given key.\"\"\"\n        path = self._path(key)\n        with open(path, \"w\") as f:\n            json.dump(verdict, f, indent=2)\n"
  },
  "metadata": {
    "gatekeeper_version": "1.0.0",
    "created_at": "2026-01-28T20:27:06.988832+00:00"
  }
}